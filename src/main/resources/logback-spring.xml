<configuration scan="true" scanPeriod="30 seconds"><!--ê³ ë¥´ë°± êµ¬í˜„ì²´ê°€ ì„¤ì •ì„ í™•ì¸í•˜ëŠ” ì£¼ê¸°-->
    <!-- ì™¸ë¶€ ì„¤ì • íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ìœ„ì˜ property íƒœê·¸ë¥¼ ë§Œë“¤ì–´ ë³´ë ¤ê³  í•œë‹¤. -->
    <property resource="properties/logback.properties"/>
    <property resource="application.properties"/>

    <!--í”„ë¡œí¼í‹°ëŠ” í•´ë‹¹ íŒŒì¼ ë°‘ì—ì„œ íŽ¸í•˜ê²Œ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ ë§Œë“¤ì–´ ë†“ì€ ê²ƒì„ ì˜ë¯¸í•œë‹¤.-->
    <property name="moduleId" value="around_hub_spring_boot"/><!-- moduleIdëŠ” í”„ë¡œì íŠ¸ê°€ ì„¤ì¹˜ëœ í´ë”ëª… ë˜ëŠ” êµ¬ë¶„í•  ìˆ˜ìžˆëŠ” ì‹ë³„ìžì´ë©´ë¨-->
    <property name="type" value="around_hub"/> <!--ë¡œê·¸íŒŒì¼ëª…ì„ êµ¬ì„±í•˜ëŠ” ì¸ìž-->
    <property name="logback" value="logback"/> <!--ë¡œê·¸ë¥¼ ì €ìž¥í•  ìµœì¢… ë””ë ‰í† ë¦¬ëª…-->
    <property name="logdir" value="/Users/ijong-ug/Documents/logback_log_dir"/>
    <!--<include resource="org/springframework/boot/logging/logback/defaults.xml"/>-->

    <!-- logbackì´ ì •ìƒ ì¢…ë£Œ ì„¤ì • -->
    <shutdownHook class="ch.qos.logback.core.hook.DelayingShutdownHook" />

    <!-- logback ìƒ‰ìƒ ì„¤ì •  -->
    <conversionRule conversionWord="clr" converterClass="org.springframework.boot.logging.logback.ColorConverter" />

    <!-- Appenders (í˜„ìž¬ ì„¤ì •ì€ ì½˜ì†”ì— ì¶œë ¥ì´ ë˜ëŠ” ì„¤ì •ì´ë‹¤.)-->
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <!-- INFO ë ˆë²¨ ì´ìƒì˜ ë¡œê·¸ë§Œ ì¶œë ¥í•©ë‹ˆë‹¤ -->
        <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
            <level>INFO</level>
        </filter>
        <!-- ë¡œê·¸ ì¶œë ¥ í˜•ì‹ì„ ì •ì˜í•©ë‹ˆë‹¤ -->
        <encoder>
            <pattern>%clr([%d{yyyy-MM-dd HH:mm:ss.SSS}]){faint} %clr([%-5level]){red,bold} %clr([%thread]){blue} %clr(%logger{30}){cyan} %clr(%msg){green}%n</pattern>
        </encoder>
    </appender>

    <!--íŒŒì¼ ë¡œê¹… ê´€ë ¨í•œ ì„¤ì •-->
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <File>${log.file.full}</File>
        <encoder>
            <pattern>${log.pattern}</pattern>
        </encoder>
        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
            <fileNamePattern>${log.file.backup.fileNamePattern}</fileNamePattern>
            <maxFileSize>20KB</maxFileSize><!-- ê° ë¡œê·¸ íŒŒì¼ì˜ ìµœëŒ€ í¬ê¸°ê°€ 20KBë¥¼ ì´ˆê³¼í•˜ë©´ ìƒˆë¡œìš´ íŒŒì¼ë¡œ ë¡¤ë§ -->
            <maxHistory>10</maxHistory><!-- ìµœëŒ€ 10ê°œì˜ ë¡œê·¸ íŒŒì¼ ìœ ì§€ -->
            <totalSizeCap>200KB</totalSizeCap><!-- ì „ì²´ ë¡œê·¸ íŒŒì¼ í¬ê¸°ê°€ 200KBë¥¼ ì´ˆê³¼í•˜ë©´ ì˜¤ëž˜ëœ íŒŒì¼ë¶€í„° ì‚­ì œ -->
        </rollingPolicy>
    </appender>

    <!-- íŠ¹ë³„í•œ ë¡œê·¸ íŒŒì¼ìš© appender: com.example íŒ¨í‚¤ì§€ ì „ìš© -->
    <appender name="SPECIAL_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <File>${logdir}/java_special_example.log</File>
        <encoder>
            <pattern>[%d{yyyy-MM-dd HH:mm:ss.SSS}] [%-5level] [%thread] %logger{30} %msg%n</pattern>
        </encoder>
        <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
            <fileNamePattern>${logdir}/special-example.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
            <maxFileSize>10MB</maxFileSize>
            <maxHistory>30</maxHistory>
            <totalSizeCap>500MB</totalSizeCap>
        </rollingPolicy>
    </appender>

    <logger name="org.springframework" level="INFO"/>
    <!--logback íŒ¨í‚¤ì§€ëŠ” WARN ë ˆë²¨ ì´ìƒë§Œ ì¶œë ¥í•˜ê² ë‹¤.-->
    <logger name="com.logbackGroup.logback.infotest" level="INFO"/>
    <!--logback.configurationi íŒ¨í‚¤ì§€ëŠ” WARN ë ˆë²¨ ì´ìƒë§Œ ì¶œë ¥í•˜ê² ë‹¤.-->
    <logger name="com.logbackGroup.logback.configuration" level="WARN"/>

    <!-- 
        com.example íŒ¨í‚¤ì§€ëŠ” root loggerì˜ ì„¤ì •ì„ ë”°ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤!
        
        ðŸ” ì´ ì„¤ì •ì˜ ì˜ë¯¸:
        1. level="DEBUG": rootì˜ INFO ë ˆë²¨ì„ ë¬´ì‹œí•˜ê³  DEBUG ë ˆë²¨ë¡œ ì„¤ì •
        2. additivity="false": root loggerë¡œ ë¡œê·¸ë¥¼ ì „íŒŒí•˜ì§€ ì•ŠìŒ (ë…ë¦½ì ìœ¼ë¡œ ë™ìž‘)
        3. appender-ref ref="FILE": rootì˜ STDOUT+FILEì„ ë¬´ì‹œí•˜ê³  FILEë§Œ ì‚¬ìš©
        
        ðŸ“Š ê²°ê³¼:
        - root ì„¤ì •: INFO ë ˆë²¨, STDOUT(ì½˜ì†”) + FILE(íŒŒì¼) ì¶œë ¥
        - com.example ì„¤ì •: DEBUG ë ˆë²¨, FILE(íŒŒì¼)ë§Œ ì¶œë ¥, ì½˜ì†”ì—ëŠ” ì¶œë ¥ ì•ˆë¨
        
        ðŸ’¡ í•µì‹¬: additivity="false"ë¡œ ì¸í•´ root loggerì™€ ì™„ì „ížˆ ë…ë¦½ì ìœ¼ë¡œ ë™ìž‘í•©ë‹ˆë‹¤!
    -->
    <logger name="com.example" level="DEBUG" additivity="false">
        <appender-ref ref="SPECIAL_FILE"/>
    </logger>

    <!-- 
        Root Logger ì„¤ì • (ê¸°ë³¸ ì„¤ì •)
        
        ðŸ” ì´ ì„¤ì •ì˜ ì˜ë¯¸:
        1. level="INFO": ëª¨ë“  íŒ¨í‚¤ì§€ì˜ ê¸°ë³¸ ë¡œê·¸ ë ˆë²¨ì„ INFOë¡œ ì„¤ì •
        2. appender-ref ref="STDOUT": ì½˜ì†”ì— ë¡œê·¸ ì¶œë ¥
        3. appender-ref ref="FILE": íŒŒì¼ì— ë¡œê·¸ ê¸°ë¡
        
        ðŸ“Š ì ìš© ëŒ€ìƒ:
        - íŠ¹ë³„í•œ logger ì„¤ì •ì´ ì—†ëŠ” ëª¨ë“  íŒ¨í‚¤ì§€
        - additivity="true"ì¸ loggerë“¤ (ê¸°ë³¸ê°’)
        
        âš ï¸ ì˜ˆì™¸:
        - com.example íŒ¨í‚¤ì§€ëŠ” additivity="false"ë¡œ ì¸í•´ ì´ ì„¤ì •ì„ ë”°ë¥´ì§€ ì•ŠìŒ
        - org.springframework íŒ¨í‚¤ì§€ëŠ” level="OFF"ë¡œ ì¸í•´ ë¡œê·¸ ì¶œë ¥ ì•ˆë¨
        - com.logbackGroup.logback.infotest, configuration íŒ¨í‚¤ì§€ëŠ” ê°ê° ë³„ë„ì˜ ì»¤ìŠ¤í…€ ì„¤ì •ì„ í•˜ê³ ìžˆì–´ ì´ ì„¤ì •ì„ ë”°ë¥´ì§€ ì•ŠìŒ
    -->
    <root level="INFO">
        <appender-ref ref="STDOUT"/>
        <appender-ref ref="FILE"/>
    </root>

</configuration>
